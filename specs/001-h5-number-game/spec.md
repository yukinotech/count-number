# Feature Specification: H5 数字点击游戏

**Feature Branch**: `001-h5-number-game`  
**Created**: 2026-01-27  
**Status**: Draft  
**Input**: User description: "把这个题目变成一道前端H5小游戏：点击1后才能点2，点击2后才能点3，依次点到100完成。评分按用时，时间越短越好，按时间分白金/黄金等等级。"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 依序点击完成挑战 (Priority: P1)

玩家进入游戏后，按从 1 到 100 的顺序点击数字，完成后获得完成提示。

**Why this priority**: 这是核心玩法，决定游戏是否成立。

**Independent Test**: 仅实现数字展示与顺序点击即可完整体验主玩法。

**Acceptance Scenarios**:

1. **Given** 游戏刚开始且显示 1-100 的数字，**When** 玩家按顺序从 1 点击到 100，**Then** 游戏判定完成并显示完成提示
2. **Given** 当前需要点击的数字是 N，**When** 玩家点击非 N 的数字，**Then** 不推进进度并给出明确的错误反馈

---

### User Story 2 - 计时与等级评定 (Priority: P2)

玩家完成后看到用时与等级（如白金、黄金等），用时越短等级越高。

**Why this priority**: 评分机制是挑战价值与可比性的核心。

**Independent Test**: 可在完成一次游戏后，根据用时显示等级。

**Acceptance Scenarios**:

1. **Given** 玩家完成 1-100，**When** 游戏结束，**Then** 显示总用时与对应等级

---

### User Story 3 - 重新开始一局 (Priority: P3)

玩家可以一键重新开始，清空进度并重新计时。

**Why this priority**: 支持反复挑战和提升成绩。

**Independent Test**: 在任意状态下点击“重新开始”可进入新一局。

**Acceptance Scenarios**:

1. **Given** 玩家正在游戏中或已完成，**When** 点击重新开始，**Then** 进度归零、计时重置并生成新一局

---

### User Story 4 - 继续上次进度 (Priority: P4)

玩家刷新或重新进入游戏时，如果存在上次未完成的进度，可以选择继续或重新开始。

**Why this priority**: 保留中断前进度，降低挫败感并提升可玩性。

**Independent Test**: 在中途刷新后，系统能够提示继续或清空并重新开始。

**Acceptance Scenarios**:

1. **Given** 存在未完成的存档进度，**When** 玩家进入页面，**Then** 弹窗提示是否继续上次进度
2. **Given** 玩家选择继续，**When** 进入游戏，**Then** 进度与计时恢复到存档状态
3. **Given** 玩家选择不继续，**When** 进入游戏，**Then** 清空存档并开始新一局

---

### Edge Cases

- 玩家快速连点同一数字时如何处理？答：按点一次处理，同一个数字只能点一次，后面就无用了。这里注意，UI上不需要一个高亮已经点过的数字的样式。因为这个游戏是考验眼力的，如果高亮了已经点过的数字，会降低游戏的难度。
- 玩家在完成前刷新页面或离开页面时如何处理当前进度？答：保存进度，下次进入游戏时，弹窗提示用户是否接着上次的进度游戏。如果用户选择不接着上次的进度游戏，则清空进度并重新开始。也就是说需要一个保存进度的能力。一般是用户完成一次需要保存进度的操作后，就自动保存进度。

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 系统必须展示 1 到 100 的数字，每个数字仅出现一次
- **FR-002**: 系统必须明确当前可点击的目标数字，并只在点击正确数字时推进进度
- **FR-003**: 系统必须在首次正确点击时开始计时，在点击 100 后停止计时并结束游戏
- **FR-004**: 系统必须在游戏过程中展示当前进度（如“已完成到 N”）
- **FR-005**: 系统必须在结束后显示总用时与等级，等级判定规则为：
  - 白金：≤ 60 秒
  - 黄金：61–120 秒
  - 白银：121–180 秒
  - 青铜：> 180 秒
- **FR-006**: 用户必须能够随时重新开始，重新开始后数字顺序与计时均重置
- **FR-007**: 系统必须提供清晰的错误反馈（点击非目标数字时的提示或视觉反馈）
- **FR-008**: 系统不得提供“已点击数字”的高亮样式，仅可突出当前目标数字
- **FR-009**: 系统必须在每次有效操作后自动保存当前进度，以便刷新后恢复
- **FR-010**: 系统必须在检测到未完成存档时弹窗提示继续或重新开始
- **FR-011**: 用户选择继续时必须恢复进度与计时；选择不继续时必须清空存档并重置游戏

### Technical Constraints *(mandatory)*

- 必须使用 React 19.2.0、TypeScript ~5.9.3、Vite ^7.2.4 与 pnpm
- 源码仅使用 .ts/.tsx，保持在 `src/` 目录下
- 变更需通过 `pnpm lint` 与 `pnpm build`

### Key Entities *(include if feature involves data)*

- **游戏局**: 状态（未开始/进行中/已完成）、开始时间、结束时间、用时
- **数字格**: 数值、状态（未点击/已点击/当前目标）
- **等级规则**: 等级名称、对应的用时区间
- **进度快照**: 当前目标数字、已完成数量、计时用时、布局版本（固定布局）

### Assumptions

- 默认采用固定布局，数字位置与底图拼图区域保持一致
- 等级命名采用白金/黄金/白银/青铜四档，时间阈值以秒为单位
- 不要求长期保存历史记录，仅保存未完成进度与最后一次结果

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 90% 的玩家在进入页面后 10 秒内能开始第一步点击（点击数字 1）
- **SC-002**: 完成游戏的玩家中，100% 可以看到用时与等级结果
- **SC-003**: 95% 的玩家能够在 5 分钟内完成 1-100 的顺序点击
- **SC-004**: 重新开始功能在 3 秒内可用并清空上局进度
- **SC-005**: 页面加载后 2 秒内可开始交互（可点击数字 1）
- **SC-006**: 点击数字后的视觉反馈在 100ms 内可感知
